<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Hong Kong ID</title>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-V0NSCM7E0F"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-V0NSCM7E0F');
    </script>
    <style></style>
    <style> .coffee-button{align-items:center;background-color:transparent;border:none;border-radius:50%;bottom:20px;box-shadow:0 4px 8px rgba(0,0,0,.2);color:#000;cursor:pointer;display:flex;font-size:.8em;justify-content:center;left:20px;padding:15px;position:fixed;transition:background-color .3s,transform .2s}.coffee-button:hover{background-color:gold;opacity:.8;transform:scale(1.05)}.coffee-button:before{content:"☕";font-size:1.5em;margin-right:5px} </style>
    
    <button class="coffee-button" onclick="window.open('https://buymeacoffee.com/sivadasari', '_blank')"></button>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&family=Montserrat:wght@500&display=swap" rel="stylesheet">
    
    <style> body{align-items:center;background:navy;box-sizing:border-box;color:#fff;display:flex;flex-direction:column;font-family:Montserrat,sans-serif;justify-content:center;margin:0;min-height:100vh;padding:20px}h1{animation:slideUp 1s ease-in-out;font-family:Roboto,sans-serif;font-size:2.5em;margin-bottom:20px;text-shadow:3px 3px 10px rgba(0,0,0,.7)}@keyframes slideUp{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}.instructions{background:hsla(0,0%,100%,.1);border-radius:10px;font-size:1.2em;margin-bottom:20px;padding:20px;text-align:center}.container,.instructions{align-items:center;box-shadow:0 4px 20px rgba(0,0,0,.5);display:flex;flex-direction:column;max-width:800px;width:100%}.container{background:hsla(0,0%,100%,.7);border-radius:15px;padding:30px}.alphabet-container{display:flex;flex-wrap:wrap;justify-content:center;margin:20px 0}.alphabet-button,.bulk-button,.home-button{background-color:purple;border:none;border-radius:5px;color:#fff;cursor:pointer;font-size:1em;margin:5px;overflow:hidden;padding:10px 15px;position:relative;transition:background-color .3s,transform .2s}.alphabet-button:hover,.bulk-button:hover,.home-button:hover{background-color:#0056b3;transform:scale(1.05)}#hkidOutput{display:none;font-size:1.5em;font-weight:700}#hkidOutput,.hkid-card{margin-top:20px;text-align:center}.hkid-card{background:purple;border-radius:10px;box-shadow:0 4px 20px rgba(0,0,0,.5);cursor:pointer;max-width:400px;padding:20px;transition:background .3s,box-shadow .3s;width:100%}.hkid-card:hover{background:hsla(0,0%,100%,.3);box-shadow:0 6px 30px rgba(0,0,0,.7)}.info{display:grid;gap:15px;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));margin-top:20px;max-width:600px;width:100%}.info-card{animation:fadeIn .5s ease-in-out;background:hsla(0,0%,100%,.1);border-radius:10px;cursor:pointer;overflow:hidden;padding:15px;position:relative;text-align:center}.info-card:hover{background:hsla(0,0%,100%,.2)}.ripple{animation:rippleAnimation .6s linear forwards;background:rgba(40,167,69,.7);border-radius:50%;pointer-events:none;position:absolute;transform:scale(0)}@keyframes rippleAnimation{to{opacity:0;transform:scale(4)}}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.loading{display:none;font-size:1.2em;margin-top:20px}.spinner{animation:spin 1s linear infinite;border:8px solid hsla(0,0%,100%,.2);border-radius:50%;border-top-color:#fff;height:40px;margin:0 auto;width:40px}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.success-animation{animation:successAnimation .5s ease forwards}@keyframes successAnimation{0%{background-color:purple;color:#fff;transform:scale(1)}50%{background-color:purple;color:#fff;transform:scale(1.1)}to{background-color:purple;color:#fff;transform:scale(1)}}@media (max-width:600px){h1{font-size:2em}.container,.instructions{padding:20px}.alphabet-button,.home-button{font-size:.9em;padding:8px 12px}.hkid-card{padding:15px}.info-card{padding:10px}} </style>
</head>
<body onload="fetchCount()">

    <h1>Generate Hong Kong ID</h1>
    <div id="hkidCount">Total HKIDs generated: 0</div>
    <div class="instructions">
        <p>Select a letter from the options below to generate a unique HKID number.</p>
        <p>Click on "Home" to return to the main page anytime.</p>
    </div>
    <div class="container">
        <button class="home-button" onclick="goHome()">Home</button>
        <div class="alphabet-container">
            <script>
                function _0x3573(_0x519e40,_0x5bb3b9){const _0x4924c1=_0x4924();return _0x3573=function(_0x35736a,_0x1f679b){_0x35736a=_0x35736a-0x13d;let _0x4fa123=_0x4924c1[_0x35736a];return _0x4fa123;},_0x3573(_0x519e40,_0x5bb3b9);}const _0x26ab4b=_0x3573;(function(_0x29f969,_0x29146f){const _0x16d9dc=_0x3573,_0x133284=_0x29f969();while(!![]){try{const _0x3aeeae=-parseInt(_0x16d9dc(0x13f))/0x1+parseInt(_0x16d9dc(0x141))/0x2+parseInt(_0x16d9dc(0x14b))/0x3*(-parseInt(_0x16d9dc(0x13d))/0x4)+parseInt(_0x16d9dc(0x145))/0x5*(parseInt(_0x16d9dc(0x143))/0x6)+-parseInt(_0x16d9dc(0x147))/0x7*(-parseInt(_0x16d9dc(0x144))/0x8)+-parseInt(_0x16d9dc(0x14a))/0x9*(parseInt(_0x16d9dc(0x148))/0xa)+parseInt(_0x16d9dc(0x142))/0xb*(parseInt(_0x16d9dc(0x149))/0xc);if(_0x3aeeae===_0x29146f)break;else _0x133284['push'](_0x133284['shift']());}catch(_0x40e160){_0x133284['push'](_0x133284['shift']());}}}(_0x4924,0x879b9));const letters='ABCDEFGHJKLMNPQRSTUVWX';function _0x4924(){const _0x10d253=['8oIzAIh','5wfLfFp','</button>','1630727pLkRtr','6340ecRMMS','15276dPCAMI','954AHzfqu','172371sNUOyZ','64vqnxxW','\x27)\x22>','771324VyYUkB','<button\x20class=\x22alphabet-button\x22\x20onclick=\x22generateHKID(\x27','1214114XjNwVl','6963pkZckp','4004772BqKYwk'];_0x4924=function(){return _0x10d253;};return _0x4924();}for(let letter of letters){document['write'](_0x26ab4b(0x140)+letter+_0x26ab4b(0x13e)+letter+_0x26ab4b(0x146));}
            </script>
        </div>
        <div class="loading" id="loading">
            <div class="spinner"></div>
            Generation in progress...
        </div>
        <div id="hkidOutput" class="hkid-card" onclick="copyToClipboard(event, this, currentHKID)">
            <span id="hkidText"></span>
        </div>
        <div id="infoOutput" class="info"></div>
    </div>

    <div style="margin-top: 20px; text-align: center; font-size: 1em; color: white; background: rgba(0, 0, 0, 0.5); padding: 10px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); position: fixed; bottom: 10px; right: 10px;"></div>

    <script>
       
        class HKID {
            constructor() {
            this.thfDict = {};
            for (let i = 0; i < 26; i++) {
            this.thfDict[String.fromCharCode(65 + i)] = i + 1; 
            }
            this.lastOne = {
            0: "0",
            1: "A"
            };
            }

            generateID(startingLetter) {
            const HKIDArray = [
            startingLetter,
            Math.floor(Math.random() * 10),
            Math.floor(Math.random() * 10),
            Math.floor(Math.random() * 10),
            Math.floor(Math.random() * 10),
            Math.floor(Math.random() * 10),
            Math.floor(Math.random() * 10),
            '?' 
            ];

            const HKIDWeights = [
            this.thfDict[HKIDArray[0]] * 8,
            HKIDArray[1] * 7,
            HKIDArray[2] * 6,
            HKIDArray[3] * 5,
            HKIDArray[4] * 4,
            HKIDArray[5] * 3,
            HKIDArray[6] * 2,
            ];

            const remainder = HKIDWeights.reduce((sum, value) => sum + value, 0) % 11;
            HKIDArray[7] = this.lastOne[remainder] || (11 - remainder).toString();

            return `${HKIDArray.slice(0, 7).join('')}(${HKIDArray[7]})`;
            }

            generateName() {
            const maleFirstNames = ["Brian", "Sany", "Normann", "Chess", "Andy", "Pierre", "John", "Michael", "David", "James", "Robert", "William", "Richard", "Joseph", "Thomas", "Charles", "Christopher", "Daniel", "Matthew", "Anthony", "Mark", "Donald", "Steven", "Paul", "Andrew", "Joshua", "Kenneth", "Kevin", "Brian", "George", "Edward", "Ronald", "Timothy", "Jason", "Jeffrey", "Ryan", "Jacob", "Gary", "Nicholas", "Eric", "Jonathan", "Stephen", "Larry", "Justin", "Scott", "Brandon", "Benjamin", "Samuel", "Gregory", "Frank"];
            const femaleFirstNames = ["Mary", "Patricia", "Linda", "Barbara", "Elizabeth", "Jennifer", "Maria", "Susan", "Margaret", "Dorothy", "Lisa", "Nancy", "Karen", "Betty", "Helen", "Sandra", "Donna", "Carol", "Ruth", "Sharon", "Michelle", "Laura", "Sarah", "Kimberly", "Deborah", "Jessica", "Shirley", "Cynthia", "Angela", "Melissa", "Brenda", "Amy", "Anna", "Rebecca", "Virginia", "Kathleen", "Pamela", "Martha", "Debra", "Amanda", "Stephanie", "Carolyn", "Christine", "Marie", "Janet", "Catherine", "Frances", "Ann", "Joyce", "Diane"];
            const lastNames = ["Chan", "Cheung", "Cheng", "Chow", "Fung", "Ho", "Kwok", "Lam", "Lee", "Leung", "Liu", "Ng", "Tang", "Wong", "Yip", "Yuen"];
            
            const isMale = Math.random() < 0.5;
            const englishFirstName = isMale ? maleFirstNames[Math.floor(Math.random() * maleFirstNames.length)] : femaleFirstNames[Math.floor(Math.random() * femaleFirstNames.length)];
            const englishLastName = lastNames[Math.floor(Math.random() * lastNames.length)];

            const chineseFirstNames = ["伟", "芳", "娜", "静", "强", "磊", "敏", "丽", "军", "洋", "勇", "艳", "杰", "娟", "涛", "明", "超", "秀英", "霞", "平", "刚", "桂英", "丹", "萍", "红", "玉兰", "飞", "玲", "桂芳", "燕", "梅", "鑫", "波", "辉", "凯", "鹏", "华", "健", "俊", "帆", "雪", "浩", "瑞", "龙", "亮", "强", "斌", "宇", "浩", "鑫", "博", "浩", "瑞", "龙", "亮", "强", "斌", "宇", "浩", "鑫", "博"];
            const chineseLastNames = ["陈", "张", "郑", "周", "方", "冯", "何", "胡", "黄", "李", "梁", "林", "刘", "卢", "马", "吴", "谢", "杨", "叶", "余", "曾", "赵", "钟", "邓", "邱", "邵", "蔡", "郑", "梁", "谭", "邓", "冯", "韩", "曹", "彭", "曾", "肖", "田", "董", "袁", "潘", "于", "蒋", "蔡", "余", "杜", "叶", "程", "魏", "苏", "吕", "丁", "任", "卢", "姚", "沈", "钟", "姜", "崔", "谭", "廖", "范", "汪", "陆", "金", "石", "戴", "贾", "韦", "夏", "邱", "方", "侯", "邹", "熊", "孟", "秦", "白", "江", "阎", "薛", "尹", "段", "雷", "黎", "史", "龙", "陶", "贺", "顾", "毛", "郝", "龚", "邵", "万", "钱", "严", "赖", "覃", "洪", "武", "莫", "孔", "常", "向", "汤"];
            const chineseFirstName = chineseFirstNames[Math.floor(Math.random() * chineseFirstNames.length)];
            const chineseLastName = chineseLastNames[Math.floor(Math.random() * chineseLastNames.length)];

            return {
            englishFirstName,
            englishLastName,
            chineseFirstName,
            chineseLastName,
            };
            }

            generateDOB() {
            const today = new Date();
            const year = today.getFullYear() - Math.floor(Math.random() * 30 + 20);
            const month = Math.floor(Math.random() * 12) + 1;
            const day = Math.floor(Math.random() * 28) + 1;
            return `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            }

            generateGender(name) {
            const maleFirstNames = ["Brian", "Sany", "Normann", "Chess", "Andy", "Pierre", "John", "Michael", "David", "James", "Robert", "William", "Richard", "Joseph", "Thomas", "Charles", "Christopher", "Daniel", "Matthew", "Anthony", "Mark", "Donald", "Steven", "Paul", "Andrew", "Joshua", "Kenneth", "Kevin", "Brian", "George", "Edward", "Ronald", "Timothy", "Jason", "Jeffrey", "Ryan", "Jacob", "Gary", "Nicholas", "Eric", "Jonathan", "Stephen", "Larry", "Justin", "Scott", "Brandon", "Benjamin", "Samuel", "Gregory", "Frank"];
            const femaleFirstNames = ["Mary", "Patricia", "Linda", "Barbara", "Elizabeth", "Jennifer", "Maria", "Susan", "Margaret", "Dorothy", "Lisa", "Nancy", "Karen", "Betty", "Helen", "Sandra", "Donna", "Carol", "Ruth", "Sharon", "Michelle", "Laura", "Sarah", "Kimberly", "Deborah", "Jessica", "Shirley", "Cynthia", "Angela", "Melissa", "Brenda", "Amy", "Anna", "Rebecca", "Virginia", "Kathleen", "Pamela", "Martha", "Debra", "Amanda", "Stephanie", "Carolyn", "Christine", "Marie", "Janet", "Catherine", "Frances", "Ann", "Joyce", "Diane"];
            return maleFirstNames.includes(name.englishFirstName) ? 'M' : 'F';
            }
        }

     
        
        function generateHKID(letter) {
            let hkidCount = 0;
            const count = hkidCount; // Use the existing hkidCount variable
            document.getElementById('hkidText').innerText = '';
            document.getElementById('infoOutput').innerHTML = '';

            const loadingElement = document.getElementById('loading');
            loadingElement.style.display = 'block';

            const hkid = new HKID();
            currentHKID = hkid.generateID(letter);
            const name = hkid.generateName();
            const dob = hkid.generateDOB();
            const gender = hkid.generateGender(name);

            setTimeout(() => {
            loadingElement.style.display = 'none';
            document.getElementById('hkidText').innerText = `${currentHKID}`;
            document.getElementById('hkidOutput').style.display = 'block';
            document.getElementById('infoOutput').innerHTML = `
                <div class="info-card" onclick="copyToClipboard(event, this, '${name.englishFirstName}')">
                <p><strong style="color: black;">English First Name:</strong></p>
                <p><strong style="color: purple;">${name.englishFirstName}</strong></p>
                </div>
                <div class="info-card" onclick="copyToClipboard(event, this, '${name.englishLastName}')">
                <p><strong style="color: black;">English Last Name:</strong></p>
                <p><strong style="color: purple;">${name.englishLastName}</strong></p>
                </div>
                <div class="info-card" onclick="copyToClipboard(event, this, '${name.chineseFirstName}')">
                <p><strong style="color: black;">Chinese First Name:</strong></p>
                <p><strong style="color: purple;">${name.chineseFirstName}</strong></p>
                </div>
                <div class="info-card" onclick="copyToClipboard(event, this, '${name.chineseLastName}')">
                <p><strong style="color: black;">Chinese Last Name:</strong></p>
                <p><strong style="color: purple;">${name.chineseLastName}</strong></p>
                </div>
                <div class="info-card" onclick="copyToClipboard(event, this, '${dob}')">
                <p><strong style="color: black;">Date of Birth:</strong></p>
                <p><strong style="color: purple;">${dob}</strong></p>
                </div>
                <div class="info-card" onclick="copyToClipboard(event, this, '${gender}')">
                <p><strong style="color: black;">Gender:</strong></p>
                <p><strong style="color: purple;">${gender}</strong></p>
                </div>
            `;
            hkidCount++;
            updateCountFile(hkidCount);
            displayCount(hkidCount);
            console.log('HKID generated. Updating count file...');
            updateCountFile(count);
            }, 300);
        }

        function copyToClipboard(event, card, value) {
            event.preventDefault(); 
            navigator.clipboard.writeText(value).then(() => {
            createRipple(event, card);
            animateSuccess(card); 
            showNotification('Copied to clipboard!'); 
            }).catch(err => {
            console.error('Failed to copy: ', err);
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.innerText = message;
            notification.style.position = 'fixed';
            notification.style.bottom = '20px';
            notification.style.left = '50%';
            notification.style.transform = 'translateX(-50%)';
            notification.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            notification.style.color = 'white';
            notification.style.padding = '10px 20px';
            notification.style.borderRadius = '5px';
            notification.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.5)';
            notification.style.zIndex = '1000';
            document.body.appendChild(notification);

            setTimeout(() => {
            notification.remove();
            }, 500); 
        }

        function createRipple(event, card) {
            const ripple = document.createElement('span');
            ripple.classList.add('ripple');
            card.appendChild(ripple);

            const pos = card.getBoundingClientRect();
            const x = event.clientX - pos.left;
            const y = event.clientY - pos.top;

            ripple.style.left = `${x}px`;
            ripple.style.top = `${y}px`;

            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        function animateSuccess(card) {
            card.classList.add('success-animation');
            setTimeout(() => {
                card.classList.remove('success-animation');
            }, 500);
        }

        function goHome() {
            window.location.reload();
        }
      
    </script>

    <button class="bulk-button" onclick="showBulkPopup()">Generate HKID data in BULK</button>

    <div id="bulkPopup" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); z-index: 1000; width: 300px; animation: fadeInPopup 0.3s ease-in-out;">
        <h2 style="margin-top: 0; color: black; font-size: medium; text-align: center;">Generate HKID data in BULK</h2>
        <label for="bulkAmountInput" style="color: black; font-size: medium;">Enter how much data you need (max 100000):</label>
        <input type="number" id="bulkAmountInput" min="1" max="100000" inputmode="numeric" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box;">
        <div style="display: flex; justify-content: space-between; margin-top: 10px;"></div>
            <button onclick="generateBulkHKID()" style="padding: 10px 15px; background-color: purple; color: white; border: none; border-radius: 5px; cursor: pointer; flex: 1; margin-right: 5px;">Generate</button>
            <button onclick="closeBulkPopup()" style="padding: 10px 15px; background-color: gray; color: white; border: none; border-radius: 5px; cursor: pointer; flex: 1; margin-left: 5px;">Cancel</button>
        </div>
        <p id="bulkError" style="color: red; display: none; text-align: center; margin-top: 10px;">Invalid input</p>
    </div>

    <div id="bulkLoading" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.7); padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); z-index: 1000; width: 300px; text-align: center;">
        <div class="spinner"></div>
        <p style="color: white; margin-top: 10px;">Generating HKID data...</p>
    </div>

    <style> @keyframes fadeInPopup{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}} </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
    
    <script>
    function showBulkPopup() {
            document.getElementById('bulkPopup').style.display = 'block';
        }

        function closeBulkPopup() {
            document.getElementById('bulkPopup').style.display = 'none';
        }

        function generateBulkHKID() {
            const bulkAmount = document.getElementById('bulkAmountInput').value;
            const amountInput = document.getElementById('bulkAmountInput');
            const amount = parseInt(amountInput.value);
            const errorElement = document.getElementById('bulkError');

            if (isNaN(amount) || amount < 1 || amount > 100000) {
                errorElement.style.display = 'block';
                return;
            }

            errorElement.style.display = 'none';
            document.getElementById('bulkPopup').style.display = 'none';
            document.getElementById('bulkLoading').style.display = 'block';

            const hkid = new HKID();
            const data = [];
            const generatedHKIDs = new Set();
            const halfAmount = Math.floor(amount / 2);

            for (let i = 0; i < amount; i++) {
                let id;
                do {
                    const letter = 'ABCDEFGHJKLMNPQRSTUVWX'.charAt(Math.floor(Math.random() * 20));
                    id = hkid.generateID(letter);
                } while (generatedHKIDs.has(id));

                generatedHKIDs.add(id);
                const name = hkid.generateName();
                const dob = hkid.generateDOB();
                const gender = hkid.generateGender(name);
                data.push({
                    Number: i + 1,
                    HKID: id,
                    EnglishFirstName: name.englishFirstName,
                    EnglishLastName: name.englishLastName,
                    ChineseFirstName: name.chineseFirstName,
                    ChineseLastName: name.chineseLastName,
                    DOB: dob,
                    Gender: gender
                });
            }

            hkidCount += parseInt(bulkAmount);
            updateCountFile(hkidCount);
            displayCount(hkidCount);

            setTimeout(() => {
                exportToXLSX(data, amount);
                document.getElementById('bulkLoading').style.display = 'none';
            }, 3000); 
        }

        function exportToXLSX(data, amount) {
            const ws = XLSX.utils.json_to_sheet(data);
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'HKID Data');

            const headerRange = XLSX.utils.decode_range(ws['!ref']);
            for (let C = headerRange.s.c; C <= headerRange.e.c; ++C) {
                const cellAddress = XLSX.utils.encode_cell({ r: 0, c: C });
                if (!ws[cellAddress]) continue;
                ws[cellAddress].s = {
                    fill: { fgColor: { rgb: "800080" } },
                    font: { color: { rgb: "FFFFFF" }, bold: true }
                };
            }

            const fileName = `hkid_data_${amount}.xlsx`;
            XLSX.writeFile(wb, fileName);
        }
    </script>

<script>
    function displayCount(count) {
        document.getElementById('hkidCount').innerText = `Total HKIDs generated: ${count}`;
    }

    function updateCountFile(count) {
    console.log('updateCountFile called with count:', count);
    
    const token = process.env.MY_TOKEN_HKID_COUNT; 
    if (!token) {
        console.error('GitHub token is not set!');
        return;
    }

    const filePath = 'hkid_count.txt';
    const repo = 'sivadasari256/genHKID';
    const branch = 'main';

 
    fetch(`https://api.github.com/repos/${repo}/contents/${filePath}`, {
        method: 'GET',
        headers: {
            'Authorization': `token ${token}`,
            'Accept': 'application/vnd.github.v3+json'
        }
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`Failed to fetch file details: ${response.statusText}`);
        }
        return response.json();
    })
    .then(fileData => {
        const sha = fileData.sha;

            return fetch(`https://api.github.com/repos/${repo}/contents/${filePath}`, {
            method: 'PUT',
            headers: {
                'Authorization': `token ${token}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                message: 'Update HKID count',
                content: btoa(count.toString()),
                sha: sha,
                branch: branch
            })
        });
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`Failed to update file: ${response.statusText}`);
        }
        return response.json();
    })
    .then(data => console.log('Count updated:', data))
    .catch(error => console.error('Error updating count:', error));
}

    function fetchCount() {
        fetch('https://raw.githubusercontent.com/sivadasari256/genHKID/main/hkid_count.txt')
            .then(response => response.text())
            .then(data => {
                hkidCount = parseInt(data);
                displayCount(hkidCount);
            })
            .catch(error => console.error('Error fetching count:', error));
    }
</script>

</body>
</html>
